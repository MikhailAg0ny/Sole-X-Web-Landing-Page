.wrapper {
  width: 80%;
  height: auto;
  aspect-ratio: 4 / 3; /* scales with column width for better alignment */
  min-height: clamp(360px, 44vw, 520px);
  max-height: min(74dvh, 820px);
  background: var(--elev);
  border: 1px solid var(--border);
  border-radius: 16px;
  overflow: hidden;
  position: relative;
  isolation: isolate; /* prevents stacking overlap */
  box-shadow: var(--shadow-1);
  /* Ensure stable positioning */
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Ensure the R3F <canvas> fills its container */
.wrapper > canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: block;
  /* Prevent canvas from floating or shifting */
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Force hardware acceleration and prevent positioning issues */
.wrapper > canvas:focus {
  outline: none;
}

@media (min-width: 900px) {
  .wrapper {
    max-width: clamp(560px, 40vw, 660px);
    margin-inline: auto; /* keep centered within the right column */
  }
}

/* Ensure stable positioning during theme transitions */
@media (prefers-reduced-motion: no-preference) {
  .wrapper {
    transition: border-color var(--theme-transition) ease-in-out,
                background-color var(--theme-transition) ease-in-out,
                box-shadow var(--theme-transition) ease-in-out;
  }
}
